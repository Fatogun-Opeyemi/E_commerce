<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-Cart</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <!-- <link href="https://cdn.jsdelivr.net/npm/daisyui@latest/dist/full.css" rel="stylesheet"> -->

    <style>
        /* table, th, td, tbody{
            border-collapse: collapse;
            border: 2px solid red;
            padding: 1rem;
            width: 60vw;
            margin: auto;
        }
         */
    </style>
</head>

<body>
    <section class="p-6">
        <h1 class="text-4xl font- mb-4 text-center underline text-red-600">E-Commerce</h1>

        <article class="flex justify-center align-middle gap-1">
            <input type="text" id="inp"
                class="form form-control input shadow-none border-dark mb-5 w-50 input-group-lg form-control h-12"
                placeholder="Enter item to add">
            <button id="button0" class="btn btn-outline-success h-12 p-0 w-12"
                style="flex-basis: auto; flex-shrink: 100px; box-sizing: content-box; "
                onclick="addStudents()">Add</button>
        </article>

    </section>

    <div class="overflow-y-scroll mx-auto" style="height: 60vh; overflow-x: scroll; width: 90vw;">
        <table id="display" class="table table-striped table-hover table-bordered  text-center mx-auto my-3 "></table>
    </div>

    <main class="flex gap-3 justify-center w-full col-lg-12">
        <button id="button1" class="btn btn-outline-info" onclick="addFirst()">Add First</button>
        <button id="button2" class="btn btn-outline-warning" onclick="deleteLast()">Delete Last</button>
        <button id="button3" class="btn btn-outline-danger" onclick="deleteAny()">Delete Any</button>
        <button id="button4" class="btn btn-outline-dark" onclick="deleteFirst()">Delete First</button>
        <button id="button5" class="btn btn-outline-primary" onclick="deleteAll()">Delete All</button>
        <button id="button6" class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#editing">Edit</button>
    </main>

    <!-- Modal for deleting-->
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <sm class="modal-title fs-5" id="staticBackdropLabel">Are you sure to delete this item?</sm>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <div class="modal-footer flex gap-3 justify-center align-middle mx-auto">
                    <button type="button" class="btn btn-outline-danger" data-bs-dismiss="modal"  onclick="yes()">Yes I am</button>
                    <button type="button" class="btn btn-outline-primary" data-bs-dismiss="modal" id="noToDelete">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    <!--  -->

    <!-- Modal for editing -->
    <!-- Button trigger modal -->
<button type="button" class="btn btn-primary d-none" >
    Launch static backdrop modal
  </button>
  
  <!-- Modal -->
  <div class="modal fade" id="editing" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="editingLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="editingLabel">Edit this item</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body p-1 m-1 border-danger">
            <input type="text" class="w-full border-secondary outline-none"  id="inputOfEdit"
                    style="
                            border-radius: 5px;
                            /* height: 30.7vh; */
                            border: 1px solid saddlebrown;
                            box-shadow: none;
                            
                            ">
                            
        </div>
        <div class="modal-footer mx-auto">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal" id="saveEditModalChanges">Edit</button>
          <button type="button" class="btn btn-outline-danger">Cancel</button>
        </div>
      </div>
    </div>
  </div>
    <!--  -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script>
        let students = [];
        let deleteIndex = null

        //hide buttons
        // let button = document.getElementById('button')

        if (students.length <= 0) {
            button1.style.display = 'none'
            button2.style.display = 'none'
            button3.style.display = 'none'
            button4.style.display = 'none'
            button5.style.display = 'none'
            button6.style.display = 'none'
        }

        let button0 = document.getElementById('button0')
        button0.addEventListener('click', () => {
            if (students.length >= 1) {
                button1.style.display = 'block'
                button2.style.display = 'block'
                button3.style.display = 'block'
                button4.style.display = 'block'
                button5.style.display = 'block'
                button6.style.display = 'block'
            }
        })

        // Add student
        function addStudents() {
            if (inp.value === '') {
                alert('Input value');
            } else {
                students.push(inp.value);
                inp.value = '';
                updateDisplay();
            }
        }

        // Add first student
        function addFirst() {
            let newItem = prompt('What item are you adding first?');
            if (newItem) {
                students.unshift(newItem);
                updateDisplay();
            } else {
                alert('Action cancelled');
            }

            inp.value = ''
        }

        // Delete last student
        function deleteLast() {
            if (students.length < 1) {
                alert('Cart empty');
            } else {
                if (confirm('Are you sure?')) {
                    students.pop();
                    updateDisplay();

                    if (students.length === 0) {
                        display.innerHTML = ''

                    } else {
                        updateDisplay()
                    }
                } else {
                    updateDisplay()
                }
            }
        }

        // Delete any student

        function deleteAny() {
            if (students.length < 1) {
                alert('cart empty')

            } else {
                let position = parseInt(prompt('What is the position of item to be deleted?'))

                if (!isNaN(position) && position >= 1 && position <= students.length) {
                    students.splice(position - 1, 1)
                    updateDisplay()
                } else {
                    alert('Invalid input')
                }
            }

        }

        // Delete first student
        function deleteFirst() {
            if (students.length < 1) {
                alert('Cart empty');
            } else {
                if (confirm('Are you sure?')) {
                    students.shift();
                    updateDisplay();

                    if (students.length === 0) {
                        display.innerHTML = ''

                    } else {
                        updateDisplay()
                    }
                } else {
                    updateDisplay()
                }
            }
        }

        // Delete all students
        function deleteAll() {
            if (students.length < 1) {
                alert('Cart Empty');
            } else {
                if (confirm('Are you sure to delete all?')) {
                    students.length = [];
                    updateDisplay();
                    display.innerHTML = ''
                } else {
                    updateDisplay()
                }
            }
        }
        

        const editItem = (index) =>{
            let inputOfEdit = document.getElementById('inputOfEdit')
            inputOfEdit.value = students[index];
        

        let saveEditModalChanges = document.getElementById('saveEditModalChanges')
        saveEditModalChanges.onclick = () => {
                students[index] = inputOfEdit.value;
                updateDisplay()
                console.log(students);
                
            }};
        
        // inputOfEdit.value = 'noo'
        // function edit(index){

        //     if(inputOfEdit.value !== ''){
        //         students.splice(index,1, inputOfEdit.value )
        //         // students[index]= inputOfEdit.value
        //         updateDisplay()
        //         console.log(students);
                
        //     }else{
        //         console.log('aigoo');
                
        //     }
        // }

        // function editItem() {
        //     if (students.length < 1) {
        //         alert('Cart empty. There are no items to edit.');
        //     } else {
        //         let newItem = parseInt(prompt(`Enter number 1 to ${students.length}`));

        //         if (!isNaN(newItem) && newItem >= 1 && newItem <= students.length) {
        //             let newItemPrompt = prompt('Enter new value for item', students[newItem - 1]);

        //             if (newItemPrompt !== null && newItemPrompt !== false && newItemPrompt !== undefined) {
        //                 students[newItem - 1] = newItemPrompt;
        //                 updateDisplay();
        //             } else {
        //                 alert('Action cancelled');
        //             }
        //         } else if (newItem === null || newItem === undefined || newItem === '' || newItem > students.length) {
        //             alert('Invalid input, enter valid position');
        //         } else {
        //             alert('Action cancelled');
        //         }
        //     }
        // }

        
        const deleteItem = (index) => {
            deleteIndex = index;
            let yesButton = document.getElementById("yesButton");
        };

        const yes = () => {
            if (deleteIndex !== null) {
                students.splice(deleteIndex, 1);

                if (students.length === 0) {
                    display.innerHTML = "";
                } else {
                    updateDisplay();
                }
                console.log(students);
            }
        }
        // let yesToDelete = document.getElementById('yesToDelete')
        // yesToDelete.onclick = function (index) {
        //     console.log(students);
            
        //         students.splice(`${index}`,1)
        //         updateDisplay()
        //         console.log(students);
            
        // }

        // function deleteItem (index){
        //     console.log(students);
            
            // yesToDelete.addEventListener('click', ()=>{

            // })
            
            // if (yesToDelete.click){
                


            //         if(students.length===0){
            //             display.innerHTML = ''
            //             button1.style.display='none'
            //             button2.style.display = 'none'
            //             button3.style.display = 'none'
            //             button4.style.display = 'none'
            //             button5.style.display = 'none'
            //             button6.style.display = 'none'

            //         }else{
            //             updateDisplay()
            //         }
            // }else{
            //     updateDisplay()
            //     console.log('hey');
                
            // }
        // }

        // let yesToDelete = document.getElementById('yesToDelete')
        // yesToDelete.addEventListener('click', 
        //     // deleteItem()
        // )
        // let noToDelete = document.getElementById('noToDelete')

        // noToDelete.addEventListener('click', (index)=>{
        //     updateDisplay()
        // })

        // function x(index) {
        //     students.splice(index,1)
        //     updateDisplay()
        //     console.log(students);

        // }
       
        // yesToDelete.addEventListener('click', deleteItem)

        // Update display

        // let index;
        function updateDisplay() {
            display.innerHTML = "";

            display.innerHTML += `<tr class='col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 col-xxl-12'> 
                                    <th class='col-xs-1 col-md-1 col-lg-1 col-xl-1 col-xxl-1'>S/N </th>
                                    <th class='col-xs-7 col-sm-8 col-md-7 col-lg-8 col-xl-8 col-xxl-8'>Product</th>
                                    <th class='col-xs-4 col-sm-3 col-md-4 col-lg-3 col-xl-3 col-xxl-3'>Action</th>

                </tr>`
            for (let i = 0; i < students.length; i++) {
                // index = i
                display.innerHTML += `
                                    <tr>
                                        <td> ${i + 1} </td>
                                        <td>${students[i]}</td>
                                        <td class='flex gap-3 justify-center'> 
                                            <button 
                                                    data-bs-toggle="modal" 
                                                    data-bs-target="#staticBackdrop" 
                                                    id='buttonForDelete'
                                                    onclick='deleteItem(${i})'
                                                    class="btn btn-outline-dark"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16"><path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"/></svg>
                                            </button>

                                            <button 
                                                    class="btn btn-outline-secondary"
                                                    onclick='editItem(${i})'
                                                    data-bs-toggle="modal" data-bs-target="#editing"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16"><path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"/><path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"/></svg>
                                            </button>
                                        </td>
                                    </tr>`

                                    // inputOfEdit.value = students[i]
            }
        }

    </script>
</body>

</html>